---
layout: post
cover: false
title: Python Numpy Library
date:   2017-05-20 11:00:00
tags: fiction
subclass: 'post tag-fiction'
categories: 'python'
---

파이썬의 넘파이(Numpy) 라이브러리에 대해 이야기 해볼까 합니다. 


Numpy는 파이썬을 사용하여 과학적인 계산을 하기위한 핵심 라이브러리입니다. 때문에 고성능의 수학 연산 객체들을 제공할뿐만아니라 이 객체들과 함께 작동하는 도구들을 제공합니다. 여기서 고성능의 수학 연산 객체는 간단히 말하면 다차원 배열 객체 같은 것들입니다.


나무위키에는 다음과 같이 나와있습니다.


### Python이 대규모 수학 연산을 필요로 하는 경우 느려서 못써먹겠다고?
### 차라리 좀 프로그램 짜는게 힘들어도 속도 때문에 그냥 C언어로 짜겠다고?
### 그러지 마. NumPy가 있으니까!


- - -

넘파이는 Numarray 와 Numeric 이라는 오래된 파이선 패키지를 계승해 나온 수학 과학 연산을 위한 파이썬 패키지입니다. 프로그래밍 하기 어려운 C,C++,Fortran 등의 저수준 언어에 비하면, NumPy로는 꽤나 편리하게 수치해석을 실행할 수 있습니다. 게다가 Numpy 내부는 상당부분 C나 포트란으로 작성되어 실행 속도도 꽤 빠른편입니다. 기본적으로 array라는 자료를 생성하고 이를 바탕으로 색인, 처리, 연산 등을 하는 기능을 수행하는데, 물론 넘파이 자체만으로도 난수생성, 푸리에변환, 행렬연산, 간단한 기술통계 분석 정도는 가능하지만 실제로는 Scipy, Pandas, matplotlib 등 다른 Python 패키지와 함께 쓰이는 경우가 많습니다. 


파이썬으로 수치해석, 통계 관련 기능을 구현한다고 할 때 Numpy는 가장 기본이 되는 모듈입니다. 그만큼 Numpy는 수치해석/ 통계 관련 작업시 중요한 역할을 하므로, 파이썬으로 관련 분야에 도전하고자 한다면 반드시 이에 대한 기초를 잘 쌓아야 할 것입니다.


만약 MATLAB을 통한 수치해석에 경험이 있는 사용자라면 Numpy를 더 친숙하게 받아들일 수 있습니다. 그런 사용자를 위한 튜토리얼도 많이 나와있는 것으로 알고 있습니다. 오늘은 넘파이를 사용하기 위한 기본적인 지식들을 다루어보겠습니다.

## 배열(Array)

numpy 배열에 들어가는 값들은 모두 같은 타입의 grid 입니다. 이것은 음수가 아닌 정수의 튜플로 인덱스되어 있습니다. 즉, 0~N까지의 인덱스로 각 배열 요소를 불러올 수 있다는 이야기 입니다. 또한 numpy 배열의 rank가 차원을 의미하며, 배열의 shape은 각 차원의 크기를 알려주는 정수로 구성됩니다. 

<pre><code>
#numpy 라이브러리를 외부 라이브러리이므로 np라는 이름으로 import
>>> import numpy as np 

# 1차원 배열을 하나 생성한다(rank = 1)
>>> a = np.array([1, 2, 3]) 

# 생성한 배열 a의 타입을 출력해본다
>>> print type(a) 
# type 'numpy.ndarray' 가 출력된다

# 생성한 배열 a의 shape를 출력해본다. 
>>> print a.shape 
"(3,)"

# []로 각 인덱스 요소에 접근할 수 있다. 
>>> print a[0], a[1], a[2] 
1 2 3

# 인덱싱으로 새로운 값을 할당할 수 있다. 
>>> a[0] = 5  
>>> print a 
[5 2 3] 

# 리스트를 사용하여 2차원 배열을 생성한다(rank = 2) 
b = np.array([[1,2,3],[4,5,6]])

# b의 모양은 "(2, 3)" 이 되며, 2행 3열이라 보면 된다. 
>>> print b.shape 
(2, 3)

 # 인덱스로 배열을 출력해본다 (0,0), (0,1), (1,0) 
>>> print b[0, 0], b[0, 1], b[1, 0]
1 2 4

</code></pre>


넘파이 라이브러리는 이 넘파이 배열을 생성하고 조작하는 다양한 함수를 제공합니다.
1. 배열 생성
2. 배열 모양 변환
3. 행렬전치
4. 배열 차원 조작
5. 배열 종류 변환
6. 배열 병합
7. 배열 분할
8. 배열 복사
9. 배열 요소 첨삭
10. 배열 요소 재배열 

넘파이 배열을 생성하는 함수들만 간단히 짚고 넘어가겠습니다. 이전에 봤던 '밑바닥부터 시작하는 딥러닝'에는 이 넘파이 배열 생성함수들이 종종 등장했었거든요.

<pre><code>
>>> import numpy as np 

# summary
# 1) zeros			: 0으로 채워진 배열 생성
# 2) ones 			: 모든 값이 1인 배열 생성
# 3) full			: 모든 값이 지정한 상수인 배열 생성
# 4) eye			: 단위행렬생성
# 5) random.random	: 모든 값이 랜덤 값으로 채워진 배열 생성

# 배열의 모든 값이, 0인 2x2 배열을 생성한다.
>>> a = np.zeros((2,2))  
>>> print a 
	[[ 0. 0.] 
	[ 0. 0.]] 

# 배열의 모든 값이 1인 1x2 배열을 생성한다.
>>> b = np.ones((1,2))  
>>> print b 
	[[ 1. 1.]]

# 배열의 모든 값이 상수(여기서는 7)인 2 x 2 배열을 생성한다. 
>>> c = np.full((2,2), 7) 
>>> print c 
	[[ 7. 7.] 
	[ 7. 7.]] 

# 2x2 단위 행렬과 같은 배열을 생성한다. 
>>> d = np.eye(2) 
>>> print d 
	[[ 1. 0.] 
	[ 0. 1.]]"
    
# 난수로 채워진 2 x 2 행렬을 생성한다.
>>> e = np.random.random((2,2))  
>>> print e 
# Might print "[[ 0.91940167 0.08143941] 
#     			[ 0.68744134 0.87236687]]"


</code></pre>

넘파이 배열과 관련된 다른 함수들은 http://avredu.blog.me/140212076323 이 곳에 잘 정리되어 있습니다.

## 다른 Python 패키지와의 관계

####Scipy

```
Numpy와 Scipy는 서로 떨어질 수 없을 정도로 밀접한 관계에 있으며 Scipy를 활용할 때에는 상당히 많이 Numpy를 이용하게 됩니다. 실제로 Scipy에 관한 책을 구매했을 때 책의 앞부분은 Scipy 관련 내용보다는 오히려 Numpy의 기초에 대한 내용 위주로 보게 되는 경우가 많다고 할 정도입니다.

Scipy는 수치해석을 Numpy를 이용하여 보다 본격적으로 이용할 수 있게 해 줍니다. 사실 대학 학부 수준의 수치해석 교재에 있는 여러 수치 미분법이나 수치 적분법, 수치미분방정식 해법(룽게-쿠타 방법 등)을 구현하는 데에는 전적으로 Python 기본 메서드와 Numpy 만으로 충분하지만 Scipy를 이용하면 Numpy만으로는 길게 코딩해야 하는 기법들을 단 2~3 줄에 구현할 수 있습니다. 게다가 Numpy로 구현하기 막막하거나 사실상 불가능한 것들도 Scipy로는 쉽게 결과를 얻을 수 있습니다. 따라서 Numpy와 Scipy를 적절하게 혼용하게 되면 MATLAB 부럽지 않은 수치해석 툴을 얻은 셈이 됩니다.
```


####Sympy

```
Python 의 대표적인 기호계산 패키지인 Sympy도 Numpy와 잘 연동됩니다. 예컨대 Numpy 만으로 구현하기 까다로운 함수의 경우, Sympy로 원하는 함수를 구하고, 이 함수를 바탕으로 Numpy를 이용하여 그 함수를 기반으로 배열형 자료를 구할 수 있습니다. 어떤 sympy 함수를 일단 구하기만 하면, f = sympy.lambdify(정의역 문자, sympy 함수, 'numpy') 꼴의 간단한 코딩만으로 Numpy에 적용가능한 함수 f를 얻을 수 있습니다. 여기에서 f(np.linspace(0,1, 101)) 를 입력하면 함수에 대해 0에서 1까지 100등분한 정의역 점들에 대한 함숫값들의 배열을 얻습니다. 간혹 Numpy 자체나 Scipy 만으로 구하기 어려운 함수도 Sympy로는 간결하게 구할 수 있는 경우도 많으므로 Numpy와 Sympy를 같이 배워두면 여러모로 쓸모가 많습니다.
```


####Matplotlib

```
파이썬에서 널리 사용되는 그래픽 패키지인 Matplotlib에서도 Numpy는 자주 애용됩니다. 물론 파이썬에 기본적으로 내장된 리스트형 자료로도 충분히 수많은 종류의 데이터를 그래프화할 수 있지만 아무래도 Numpy를 쓸 때보다는 코드가 굉장히 복잡해지고, 그래프를 얻는 속도도 느립니다. 실제로 인터넷 상의 Matplotlib 튜토리얼이나 예제들을 봐도 다들 Numpy의 ndarray 자료형을 쓰지 리스트형은 잘 쓰지 않습니다. 당연하지만 Matplotlib 를 기반으로 좀 더 유려한 그래프와 도표를 얻는 seaborn 과 같은 패키지에도 굉장히 유용하게 쓰입니다. 
```


####Pandas

```
Pandas는 Numpy보다 더 복잡한 형태의 자료(Series, DataFrame)를 다루지만, Numpy를 이용해 만든 array 자료를 이용해서 Series나 DataFrame 자료를 생성하거나 수정할 수 있습니다. 
```


_ _ _

**이처럼 실제로는 'Numpy + 다른 한개의 패키지' 조합뿐만 아니라 'Numpy + 여러개의 패키지' 조합을 쓸 때가 많습니다. 예컨대 Sympy 로 t domain 함수의 라플라스 변환 을 구하고, Numpy를 이용해서 변환한 함수의 값들에 대한 배열형 자료를 얻고, 이 배열형 자료를 바탕으로 Matplotlib을 써서 그래프를 그릴 수 있습니다.**

아래는 포스팅하는데 참고한 블로그들의 url입니다.

http://avredu.blog.me/140212076323
http://ishuca.tistory.com/373
https://namu.wiki/w/NumPy